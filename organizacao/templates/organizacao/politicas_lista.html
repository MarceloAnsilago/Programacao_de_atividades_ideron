{% extends "base.html" %}
{% block title %}Perfis de Permissão{% endblock %}

{% block content %}
<h2 class="mb-3"><i class="bi bi-gear-fill"></i> Perfis de Permissão</h2>

<a class="btn btn-primary mb-3" href="{% url 'organizacao:politicas_novo' %}">
  <i class="bi bi-plus"></i> Novo Perfil
</a>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Nome</th>
      <th>Descrição</th>
      <th class="text-end">Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for p in perfis %}
      <tr>
        <td>{{ p.nome }}</td>
        <td>{{ p.descricao }}</td>
        <td class="text-end">
          {% if p.pk %}
            <!-- Botão para gerenciar vínculos -->
            <a class="btn btn-sm btn-secondary"
               href="{% url 'organizacao:vinculos_seletor' p.pk %}">
              Vínculos
            </a>

            <!-- Botão para gerenciar permissões -->
            <a class="btn btn-sm btn-warning"
               href="{% url 'organizacao:permissoes_seletor' p.pk %}">
              Permissões
            </a>

            <!-- Botão opcional de edição direta -->
            <!--
            <a class="btn btn-sm btn-outline-primary"
               href="{% url 'organizacao:politicas_editar' p.pk %}">
              Editar direto
            </a>
            -->
          {% else %}
            <button class="btn btn-sm btn-secondary" disabled>Vínculos</button>
            <button class="btn btn-sm btn-warning" disabled>Permissões</button>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="3" class="text-muted">Nenhum perfil cadastrado.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
